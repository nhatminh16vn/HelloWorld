<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Game Bóng Nảy Cool x999999999</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@600&display=swap');
  body {
    margin: 0;
    overflow: hidden;
    background: radial-gradient(circle at center, #0f2027, #203a43, #2c5364);
    font-family: 'Poppins', sans-serif;
    color: white;
    user-select: none;
  }
  #score {
    position: absolute;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 30px;
    font-weight: 700;
    text-shadow: 0 0 10px #00ffe7, 0 0 20px #00ffe7;
    z-index: 10;
  }
  #gameOver {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 48px;
    color: #ff1744;
    font-weight: 800;
    text-shadow: 0 0 15px #ff1744;
    display: none;
    z-index: 10;
  }
  canvas {
    display: block;
    margin: 0 auto;
    background: transparent;
    filter: drop-shadow(0 0 10px #00ffe7);
  }
</style>
</head>
<body>
  <div id="score">Điểm: 0</div>
  <div id="gameOver">Game Over! Nhấn F5 để chơi lại.</div>
  <canvas id="gameCanvas" width="600" height="450"></canvas>

  <!-- Âm thanh -->
  <audio id="bounceSound" src="https://actions.google.com/sounds/v1/sports/basketball_bounce.ogg" preload="auto"></audio>
  <audio id="gameOverSound" src="https://actions.google.com/sounds/v1/cartoon/cartoon_boing.ogg" preload="auto"></audio>

<script>
  const canvas = document.getElementById('gameCanvas');
  const ctx = canvas.getContext('2d');

  const bounceSound = document.getElementById('bounceSound');
  const gameOverSound = document.getElementById('gameOverSound');

  // Background particles for cool effect
  const particles = [];
  const particleCount = 60;
  for(let i=0; i<particleCount; i++){
    particles.push({
      x: Math.random() * canvas.width,
      y: Math.random() * canvas.height,
      radius: Math.random() * 1.5 + 0.5,
      alpha: Math.random() * 0.5 + 0.3,
      speedY: Math.random() * 0.3 + 0.1,
      speedX: (Math.random()-0.5)*0.2,
    });
  }

  function drawParticles(){
    particles.forEach(p => {
      ctx.beginPath();
      ctx.fillStyle = `rgba(0,255,231,${p.alpha})`;
      ctx.shadowColor = '#00fff0';
      ctx.shadowBlur = 8;
      ctx.arc(p.x, p.y, p.radius, 0, Math.PI*2);
      ctx.fill();
      p.y -= p.speedY;
      p.x += p.speedX;
      if(p.y < 0) p.y = canvas.height;
      if(p.x > canvas.width) p.x = 0;
      if(p.x < 0) p.x = canvas.width;
    });
  }

  const ball = {
    x: canvas.width/2,
    y: canvas.height/2,
    radius: 20,
    dx: 5,
    dy: -5,
    colorStops: ['#00fff0', '#00b8a9', '#005f56'],
    angle: 0,
    speedUp: 0,
  };

  const paddle = {
    width: 120,
    height: 18,
    x: (canvas.width - 120)/2,
    y: canvas.height - 40,
    speed: 10,
    dx: 0,
    colorStops: ['#ff1744', '#d50000', '#ff5252'],
    glowAlpha: 0,
  };

  let score = 0;
  let isGameOver = false;
  const scoreElement = document.getElementById('score');
  const gameOverElement = document.getElementById('gameOver');

  // Linear gradient helper
  function createGradient(x, y, radius, colors){
    const gradient = ctx.createRadialGradient(x, y, radius*0.3, x, y, radius);
    colors.forEach((c,i) => {
      gradient.addColorStop(i/(colors.length-1), c);
    });
    return gradient;
  }

  function drawBall(){
    ball.angle += 0.05;
    // Animate gradient color shift
    const gradient = createGradient(ball.x, ball.y, ball.radius, ball.colorStops);
    ctx.save();
    ctx.shadowColor = '#00fff0';
    ctx.shadowBlur = 20;
    ctx.fillStyle = gradient;
    ctx.beginPath();
    ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI*2);
    ctx.fill();
    ctx.restore();

    // Inner highlight circle
    ctx.save();
    ctx.globalAlpha = 0.5 + 0.5*Math.sin(ball.angle*5);
    ctx.fillStyle = 'white';
    ctx.beginPath();
    ctx.arc(ball.x - ball.radius/3, ball.y - ball.radius/3, ball.radius/3, 0, Math.PI*2);
    ctx.fill();
    ctx.restore();
  }

  function drawPaddle(){
    const gradient = ctx.createLinearGradient(paddle.x, paddle.y, paddle.x + paddle.width, paddle.y);
    paddle.colorStops.forEach((c,i) => {
      gradient.addColorStop(i/(paddle.colorStops.length-1), c);
    });

    ctx.save();
    ctx.shadowColor = `rgba(255, 23, 68, ${paddle.glowAlpha})`;
    ctx.shadowBlur = 20 * paddle.glowAlpha;
    ctx.fillStyle = gradient;
    ctx.fillRect(paddle.x, paddle.y, paddle.width, paddle.height);
    ctx.restore();
  }

  function movePaddle(){
    paddle.x += paddle.dx;
    if(paddle.x < 0) paddle.x = 0;
    if(paddle.x + paddle.width > canvas.width) paddle.x = canvas.width - paddle.width;
  }

  function increaseDifficulty(){
    // Tăng tốc độ bóng mỗi 5 điểm, tối đa +5 đơn vị
    const speedIncrease = Math.min(5, 0.5 * Math.floor(score / 5));
    const signX = ball.dx > 0 ? 1 : -1;
    const signY = ball.dy > 0 ? 1 : -1;
    ball.dx = signX * (5 + speedIncrease);
    ball.dy = signY * (5 + speedIncrease);
  }

  function update(){
    if(isGameOver) return;

    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawParticles();

    drawBall();
    drawPaddle();

    ball.x += ball.dx;
    ball.y += ball.dy;

    // Nảy bóng chạm tường trái/phải
    if(ball.x + ball.radius > canvas.width || ball.x - ball.radius < 0){
      ball.dx = -ball.dx;
    }

    // Nảy bóng chạm tường trên
    if(ball.y - ball.radius < 0){
      ball.dy = -ball.dy;
    }

    // Bóng chạm paddle
    if(
      ball.y + ball.radius >= paddle.y &&
      ball.x > paddle.x &&
      ball.x < paddle.x + paddle.width
    ){
      ball.dy = -ball.dy;
      score++;
      scoreElement.textContent = 'Điểm: ' + score;

      // Paddle glow effect
      paddle.glowAlpha = 1;
      setTimeout(() => {
        paddle.glowAlpha = 0;
      }, 150);

      bounceSound.currentTime = 0;
      bounceSound.play();

      increaseDifficulty();
    }

    // Bóng rơi xuống dưới -> game over
    if(ball.y - ball.radius > canvas.height){
      gameOver();
    }

    movePaddle();
    requestAnimationFrame(update);
  }

  function gameOver(){
    isGameOver = true;
    gameOverElement.style.display = 'block';
    gameOverSound.play();
  }

  document.addEventListener('keydown', e => {
    if(e.key === 'ArrowLeft') paddle.dx = -paddle.speed;
    else if(e.key === 'ArrowRight') paddle.dx = paddle.speed;
  });

  document.addEventListener('keyup', e => {
    if(e.key === 'ArrowLeft' || e.key === 'ArrowRight'){
      paddle.dx = 0;
    }
  });

  update();
</script>
</body>
</html>
